<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Document</title>
</head>
<body>

<form id="myForm">
    <label for="name">Name:</label>
    <input id="name" name="name" placeholder="Name" type="text"><br>
    <div id="nameError" style="color: red;"></div>
    <br>

    <label for="message">Message:</label>
    <textarea id="message" name="message" placeholder="Message" rows="2"></textarea><br>
    <div id="messageError" style="color: red;"></div>
    <br>

    <label for="phone">Phone number:</label>
    <input id="phone" name="phone" placeholder="Number" type="text"><br>
    <div id="phoneError" style="color: red;"></div>
    <br>

    <label for="email">Email:</label>
    <input id="email" name="email" placeholder="Email" type="email"><br>
    <div id="emailError" style="color: red;"></div>
    <br>

    <button type="submit">Submit</button>
</form>

<script>
    const form = document.getElementById("myForm");
    const nameInput = document.getElementById("name");
    const messageInput = document.getElementById("message");
    const phoneInput = document.getElementById("phone");
    const emailInput = document.getElementById("email");

    function clearErrorInputs() {
        document.getElementById('nameError').innerText = '';
        document.getElementById('messageError').innerText = '';
        document.getElementById('phoneError').innerText = '';
        document.getElementById('emailError').innerText = '';
    }


    form.addEventListener("submit", function (event) {
        let formIsValid = true;

        clearErrorInputs();

        if (!/^[a-zA-Z-]+$/.test(nameInput.value.trim())) {
            document.getElementById("nameError").innerText = "Invalid name";
            formIsValid = false;
        }

        if (!/^.{5,500}$/.test(messageInput.value.trim())) {
            document.getElementById("messageError").innerText =
                "Message must be between 5 and 500 characters long";
            formIsValid = false;
        }

        if (!(/^\+380\d{9}$/.test(phoneInput.value.trim()))) {
            document.getElementById("phoneError").innerText =
                'Invalid phone number (must start with +380)';
            formIsValid = false;
        }

        if (!(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value.trim()))) {
            document.getElementById("emailError").innerText = 'Invalid email address';
            formIsValid = false;
        }

        if (!formIsValid) {
            event.preventDefault();
        } else {
            console.log(`Name: ${nameInput.value}, Message: ${messageInput.value},
                         Phone number: ${phoneInput.value}, Email: ${emailInput.value}`);

            event.preventDefault();
            setTimeout(() => { form.submit() }, 9000);
        }

    });

</script>

</body>
</html>
